<mat-expansion-panel style="width: 1000px; margin-bottom: 20px" expanded="true">
  <mat-expansion-panel-header>
    <div class="security-header">
      <img
        src="assets/claim.png"
        alt="claim-icon"
        class="user"
        style="display: inline-block"
      />
      <p style="display: inline; margin-left: 5px">Settlement Requests</p>
    </div>
  </mat-expansion-panel-header>

  <div style="margin-top: 10px">
    <div *ngIf="beneficiaryRequestsDataSource.data.length > 0; else noRequests">
      <div class="table-container">
        <table mat-table [dataSource]="beneficiaryRequestsDataSource" matSort>
          <ng-container matColumnDef="checkId">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Check Number
            </th>
            <td mat-cell *matCellDef="let tx">{{ tx.checkId }}</td>
          </ng-container>

          <ng-container matColumnDef="initiatorName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Initiator</th>
            <td mat-cell *matCellDef="let tx">{{ tx.initiatorName }}</td>
          </ng-container>

          <ng-container matColumnDef="transferDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
              Date Requested
            </th>
            <td mat-cell *matCellDef="let tx">
              {{ formatDate(tx.transferDate) }}
            </td>
          </ng-container>

          <ng-container matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Amount</th>
            <td mat-cell *matCellDef="let tx">
              <strong>{{ tx.amount | number : "1.2-2" }}â‚ª</strong>
            </td>
          </ng-container>

          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
            <td mat-cell *matCellDef="let tx">{{ tx.status }}</td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let tx" class="filter-buttons">
              <ng-container
                *ngIf="tx.status?.toLowerCase() === 'pending'; else showStatus"
              >
                <button class="btn-accept" (click)="respond(tx.checkId, true)">
                  Accept
                </button>
                <button class="btn-reject" (click)="respond(tx.checkId, false)">
                  Reject
                </button>
              </ng-container>
              <ng-template #showStatus>
                <span class="status-label"> Replied </span>
              </ng-template>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let r; columns: displayedColumns"></tr>
        </table>
      </div>

      <mat-paginator
        [pageSizeOptions]="dynamicPageSizeOptions"
        showFirstLastButtons
      >
      </mat-paginator>
    </div>

    <ng-template #noRequests>
      <div class="limited-info" style="text-align: center">
        <h3>No Pending Requests</h3>
        <p>There are no settlement requests awaiting your response.</p>
      </div>
    </ng-template>
  </div>
</mat-expansion-panel>
